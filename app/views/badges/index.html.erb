<div class="mx-auto w-full max-w-4xl p-8">
  <h1 class="text-4xl font-bold text-primary mb-4 text-center">Badges</h1>
  <p class="text-lg text-gray-700 mb-8 text-center">
    Earn badges by completing challenges and participating in WS10 events. Click on a badge to learn more.
  </p>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <% Badge.select(:badge_family).distinct.order(:badge_family).pluck(:badge_family).each do |family| %>
      <% representative_badge = Badge.in_family(family).by_level_order.first %>
      <% if representative_badge %>
        <% family_badges = Badge.in_family(family).by_level_order %>
        <% has_multiple_levels = family_badges.count > 1 %>
        <%= link_to badge_path(representative_badge), class: "block p-4 bg-white rounded-lg shadow hover:shadow-lg transition-shadow border-2 border-gray-200" do %>
          <div class="flex items-center">
            <div class="inline-flex items-center justify-center w-16 h-16 text-sm font-semibold text-primary bg-primary/5 rounded-full mr-4 flex-shrink-0">
              <%= raw representative_badge.icon %>
            </div>
            <div class="flex-1">
              <h3 class="text-xl font-semibold text-gray-800 mb-1 flex items-center gap-2">
                <%= representative_badge.name.gsub(" (Bronze)", "") %>
                <% if representative_badge.repeatable? %>
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-primary/60">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7 48.678 48.678 0 0 0-7.324 0 4.006 4.006 0 0 0-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 0 0 3.7 3.7 48.656 48.656 0 0 0 7.324 0 4.006 4.006 0 0 0 3.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3-3 3" />
                  </svg>
                <% end %>
              </h3>
              <% if has_multiple_levels %>
                <p class="text-sm text-gray-500 mb-1">Bronze • Silver • Gold</p>
              <% end %>
              <p class="text-gray-600 text-sm"><%= representative_badge.description %></p>
            </div>
          </div>
        <% end %>
      <% end %>
    <% end %>
  </div>

  <div class="mt-8 pt-6 border-t border-gray-200">
    <div class="flex items-center gap-4 text-sm text-gray-600 justify-center">
      <div class="flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-primary/60">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7 48.678 48.678 0 0 0-7.324 0 4.006 4.006 0 0 0-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 0 0 3.7 3.7 48.656 48.656 0 0 0 7.324 0 4.006 4.006 0 0 0 3.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3-3 3" />
        </svg>
        <span>Repeatable - this badge can be earned more than once</span>
      </div>
    </div>
  </div>
</div>

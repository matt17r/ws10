<div class="mt-16 px-6 lg:px-8">
  <div class="mx-auto max-w-2xl lg:max-w-7xl">
    <h1 class="text-pretty text-4xl font-medium tracking-tight text-gray-950 dark:text-white sm:text-6xl">Have fun and get fit, here in Sydneyâ€™s backyard</h1>
    <h2 class="mt-6 max-w-3xl text-2xl font-medium text-gray-500">WS10 is a monthly 10km running event held on the third Sunday of every month at 3 great locations around Western Sydney.</h2>
  </div>
</div>
<div class="relative py-24">
  <div class="absolute inset-x-2 bottom-0 top-48 rounded-4xl ring-1 ring-inset ring-black/5 bg-linear-115 from-brand-green from-28% via-brand-rose via-40% to-primary sm:bg-linear-145"></div>
  <div class="relative px-6 lg:px-8">
    <div class="mx-auto max-w-2xl lg:max-w-7xl">
      <div class="grid grid-cols-1 gap-8 lg:grid-cols-3">
      <% @upcoming_events.each_with_index do |event, index| %>
        <div class="relative -m-2 grid grid-cols-1 rounded-4xl max-lg:mx-auto max-lg:w-full max-lg:max-w-md overflow-hidden">
        <% if index == 0 %>
          <%= link_to course_path(event.location), class: "absolute top-0 right-0 w-16 h-16" do %>
            <% if event.abandoned? %>
              <div class="bg-red-600 absolute transform rotate-45 text-center text-white font-semibold py-1 right-[-40px] top-[32px] w-[170px]">
                CANCELLED
              </div>
            <% else %>
              <div class="bg-primary absolute transform rotate-45 text-center text-white font-semibold py-1 right-[-40px] top-[32px] w-[170px]">
                Next Event
              </div>
            <% end %>
          <% end %>
        <% end %>
          <div class="rounded-4xl bg-white p-10 pb-9 shadow-2xl ring-1 ring-black/25 ring-inset">
            <%= link_to course_path(event.location) do %>
              <h2 class="font-mono font-semibold uppercase tracking-widest text-gray-500 dark:text-gray-400"><%= event.location %></h2>
            <% end %>
            <%= link_to course_path(event.location) do %>
              <p class="mt-2 text-gray-950/75"><%= event.location.subtitle %></p>
            <% end %>
            <%= link_to course_path(event.location) do %>
              <div class="mt-8 text-5xl font-medium <%= event.abandoned? ? "text-red-500 line-through" : (index == 0 ? "text-primary" : "text-gray-950") %>"><%= event.date.strftime("%-d %b") %></div>
            <% end %>
            <% if event.abandoned? && event.cancellation_reason.present? %>
              <p class="mt-2 text-sm text-red-600"><%= event.cancellation_reason %></p>
            <% end %>
            <div class="mt-8 flex gap-2 flex-wrap">
              <% if index == 0 && !event.active? %>
                <%= link_to "Course Info", course_path(event.location), class: "inline-flex items-center justify-center px-4 py-[calc(theme(spacing.2)-1px)] rounded-full border border-transparent bg-primary shadow-md whitespace-nowrap text-base font-medium text-white hover:bg-primary-hover" %>
              <% else %>
                <%= link_to "Course Info", course_path(event.location), class: "inline-flex items-center justify-center px-4 py-2 rounded-full border border-primary whitespace-nowrap text-base font-medium text-primary hover:bg-primary-bg" %>
              <% end %>
              <% if index == 0 && event.active? %>
                <% if @current_user_checked_in %>
                  <%= link_to "Check Others In", check_in_path(@active_event_token), class: "inline-flex items-center justify-center px-4 py-[calc(theme(spacing.2)-1px)] rounded-full border border-transparent bg-primary shadow-md whitespace-nowrap text-base font-medium text-white" %>
                <% else %>
                  <%= link_to "Check In Now!", check_in_path(CheckIn.token_for_event(event.number)), class: "inline-flex items-center justify-center px-4 py-[calc(theme(spacing.2)-1px)] rounded-full border border-transparent bg-primary shadow-md whitespace-nowrap text-base font-medium text-white" %>
                <% end %>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
      </div>
    </div>
  </div>
</div>
<div class="mt-16 px-6 lg:px-8">
  <div class="mx-auto max-w-2xl lg:max-w-7xl">
    <section id="about">
      <h3 class="mt-2 text-center text-pretty text-4xl font-medium tracking-tight text-gray-950 dark:text-white sm:text-6xl">What is WS10?</h3>
      <div class="mx-auto mb-32 mt-16 max-w-xl space-y-12">
        <dl>
          <dt class="font-semibold">It's Monthly</dt>
          <dd class="mt-4 text-gray-600">WS10 is a monthly, 10k run held on the third Sunday of every month, at 7am.</dd>
        </dl>
        <dl>
          <dt class="font-semibold">It's Local</dt>
          <dd class="mt-4 text-gray-600">WS10 rotates through three great locations. (Re)discover the tracks and parklands of Western Sydney.</dd>
        </dl>
        <dl>
          <dt class="font-semibold">It's Friendly</dt>
          <dd class="mt-4 text-gray-600">We welcome people regardless of age, appearance or ability; we're here to run and encourage one another.</dd>
        </dl>
        <div class="text-center mt-4 mb-4">
          Come along to meet new friends, improve your run times or help train towards a longer event such as a marathon or half-marathon.
        </div>
        <div class="text-center space-x-4">
          <%= link_to "Find out more", about_path, class: "inline-flex items-center justify-center px-4 py-[calc(theme(spacing.2)-1px)] rounded-full border border-transparent bg-primary shadow-md whitespace-nowrap text-base font-medium text-white hover:bg-primary-hover" %>
          <%= link_to "Support WS10", support_path, class: "inline-flex items-center justify-center px-4 py-2 rounded-full border border-primary whitespace-nowrap text-base font-medium text-primary hover:bg-primary-bg" %>
        </div>
      </div>
    </section>

    <%= render "shared/statistics_widget", statistics: @statistics %>
  </div>
</div>

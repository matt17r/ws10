<%= form_with model: volunteer, url: volunteer.persisted? ? volunteer_path(volunteer) : "/admin/volunteers", method: volunteer.persisted? ? :patch : :post, local: true do |f| %>
  <% if volunteer.errors.any? %>
    <div class="mb-4 p-4 bg-red-50 border border-red-200 rounded-md">
      <h3 class="text-sm font-medium text-red-800">
        <%= pluralize(volunteer.errors.count, "error") %> prohibited this volunteer from being saved:
      </h3>
      <ul class="mt-2 text-sm text-red-700 list-disc list-inside">
        <% volunteer.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= f.hidden_field :event_id, value: event.id %>

  <div class="mb-4">
    <%= f.label :user_id, "Volunteer", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= f.collection_select :user_id, User.order(:name), :id, :name_with_display_name, { prompt: "Select volunteer" }, class: "block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 outline-gray-300 focus:outline-2 focus:outline-primary sm:text-sm" %>
  </div>

  <div class="mb-4">
    <%= f.label :role, "Role", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= f.text_field :role, placeholder: "e.g., Timekeeper, Marshal, etc.", class: "block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 outline-gray-300 focus:outline-2 focus:outline-primary sm:text-sm" %>
  </div>

  <div class="flex gap-2">
    <%= f.submit volunteer.persisted? ? "Update Volunteer" : "Create Volunteer", class: "rounded-md border border-transparent bg-primary px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-hover cursor-pointer" %>
    <% if volunteer.persisted? %>
      <%= link_to "Cancel", edit_results_admin_event_path(event.number), class: "rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 cursor-pointer" %>
    <% end %>
  </div>
<% end %>
